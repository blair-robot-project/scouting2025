---
title: "449 Scouting 2025"
format: html
editor: visual
params:
    red1: 449
    red2: 451
    red3: 456
    blue1: 487
    blue2: 563
    blue3: 452
---

```{r setup, message=FALSE, warning=FALSE}
rm(list = setdiff(ls(), c("red1", "red2", "red3", "blue1", "blue2", "blue3")))

library(tidyverse)

blair_red <- "#a7000a"

raw <- read_csv("made_up_data.csv")
```

```{r dplyr}

data <- raw %>%
  group_by(team) %>%
  summarize(
    matches = n(),
    
    close_pct = sum(start == "Close" , na.rm = TRUE) / matches,
    middle_pct = sum(start == "Middle", na.rm = TRUE) / matches,
    far_pct = sum(start == "Far" , na.rm = TRUE) / matches,
    
    show_pct = sum(show == "TRUE", na.rm = TRUE) / matches,
    move_pct = sum(move == "TRUE", na.rm = TRUE) / matches,
    
    l1 = mean(coral_L1_num),
    l2 = mean(coral_L2_num),
    l3 = mean(coral_L3_num),
    l4 = mean(coral_L4_num),
    
    l1coralscore = l1*2,
    l2coralscore = l2*3,
    l3coralscore = l3*4,
    l4coralscore = l4*5,
    
    avg_score = sum(l1coralscore,l2coralscore,l3coralscore,l4coralscore)/matches,
    
    
    auto_coral_L1_num = sum(auto_coral_L1_num)/n(),
    auto_coral_L2_num = sum(auto_coral_L2_num)/n(),
    auto_coral_L3_num = sum(auto_coral_L3_num)/n(),
    auto_coral_L4_num = sum(auto_coral_L4_num)/n(),

    auto_coral_score = sum(auto_coral_L1_num*3+auto_coral_L2_num*4+
                           auto_coral_L3_num*6+auto_coral_L4_num*7)/n(),
    
    robot_net_total_num = sum(robot_net_score+robot_net_miss)/n(),
    robot_net_average_num = sum(
      ifelse(robot_net_score+robot_net_miss!=0, 
             robot_net_score/(robot_net_score+robot_net_miss),
             0))/n(),
    robot_net_score = sum(robot_net_score)/n(),
    proc_score = sum(proc_score)/n()
  )

red_alliance <- c(params$red1, params$red2, params$red3)
blue_alliance <- c(params$blue1, params$blue2, params$blue3)

data <- data %>%
  filter(team %in% c(red_alliance, blue_alliance))

```

```{r}
graph <- data %>%
  select(team, l1, l2, l3, l4,avg_score,)%>%
  pivot_longer(cols = c(l4, l3, l2,l1), 
                 names_to = "level", 
                 values_to = "coral_num")

graph$score <- case_when(
  graph$level == "l1" ~ graph$coral_num*2, 
  graph$level == "l2" ~ graph$coral_num*3, 
  graph$level == "l3" ~ graph$coral_num*4, 
  graph$level == "l4" ~ graph$coral_num*5, 
)


ggplot(graph, aes(x = `team`, y = score, fill = level)) + 
  
    geom_bar(position = "stack", stat = "identity") + 
    labs(title = "Level Summary", 
         x = "Team", y = "Coral score", fill = "Level") +
   scale_fill_manual(values=c("lightskyblue","royalblue1","royalblue3","navy"))+
    theme_bw()
```

```{r}
library(ggplot2)

# Example data
data2 <- data.frame(
  category = c('A', 'B', 'C', 'D'),
  value = c(5, 7, 3, 8),
  point_value = c(2, 6, 4, 7)  # Points to overlay on the bars
)

# Create the plot
ggplot(data2, aes(x = category)) +
  geom_bar(aes(y = value), stat = 'identity', fill = 'skyblue', width = 0.6) +  # Bar graph
  geom_point(aes(y = point_value), color = 'red', size = 4)  # Overlay points
```
